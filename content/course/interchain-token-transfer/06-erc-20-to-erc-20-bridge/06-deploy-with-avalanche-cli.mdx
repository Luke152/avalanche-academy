---
title: Deploy and Use ICTT with Avalanche CLI
description: Alternative and simplified way to deploy ICTT to transfer ERC-20 to ERC-20 assets
updated: 2024-05-31
authors: [ashucoder9]
icon: Terminal
---
import { Step, Steps } from 'fumadocs-ui/components/steps';


## Transfer an ERC-20 Token to an Avalanche L1 as an ERC-20 Token

In the previous sections of this chapter we manually deployed and interacted with the Interchain Token Transfer contracts. In this section we will use the Avalanche CLI to deploy the contracts and transfer the tokens.

## What we will do

1. Environment Setup
2. Create an Avalanche L1 and Deploy on Local Network
3. Deploy an ERC-20 Contract on C-chain
4. Deploy the Avalanche Interchain Token Transfer Contracts on C-chain and Avalanche L1
5. Start Sending Tokens

## Environment Setup

### Run on Github Codespace

You can run them directly on Github by clicking **Code**, switching to the **Codespaces** tab and clicking **Create codespace on main**. A new window will open that loads the codespace. Afterwards you will see a browser version of VS code with all the dependencies installed. Codespace time out after some time of inactivity, but can be restarted.

### Local Network Environment

Open the `avalanche-starter-kit` repository in VS Code.

You should be prompted to open the repository in a devcontainer. Click on **Reopen in Container**.

The dev container environment comes preconfigured with dependencies such as Avalanche CLI, Foundry, and other tools.

For convenience the private key `56289e99c94b6912bfc12adc093c9b51124f0dc54ac7a766b2bc5ccf558d8027` of the default airdrop address is stored in the environment variable `$PK` in `.devcontainer/devcontainer.json`. 

Furthermore, the RPC url for the C-Chain `local-c` and Avalanche L1 created with the name `myblockchain` on the local network is set in `foundry.toml`.

<Steps>

<Step>
## Configuration and Deployment

To get started, create an Avalanche L1 configuration named "myblockchain":

```bash
avalanche blockchain create myblockchain
```
```bash
✔ Subnet-EVM
✔ I want to use defaults for a test environment
```

Deploy the Avalanche L1:

```bash
avalanche blockchain deploy myblockchain
```
```bash
✔ Local Network
```

The CLI will output addresses and information that will be important for the rest of the tutorial:

```bash
Deploying Blockchain. Wait until network acknowledges...

Teleporter Messenger successfully deployed to c-chain (0x253b2784c75e510dD0fF1da844684a1aC0aa5fcf)
Interchain Messaging Registry successfully deployed to c-chain (0x17aB05351fC94a1a67Bf3f56DdbB941aE6c63E25)

Teleporter Messenger successfully deployed to myblockchain (0x253b2784c75e510dD0fF1da844684a1aC0aa5fcf)
Interchain Messaging Registry successfully deployed to myblockchain (0x73b1dB7E9923c9d8fd643ff381e74dd9618EA1a5)

...

Browser Extension connection details (any node URL from above works):
RPC URL:           http://127.0.0.1:9650/ext/bc/2u9Hu7Noja3Z1kbZyrztTMZcDeqb6acwyPyqP4BbVDjoT8ZaYc/rpc
Codespace RPC URL: https://organic-palm-tree-ppr5xxg7xvv2974r-9650.app.github.dev/ext/bc/2u9Hu7Noja3Z1kbZyrztTMZcDeqb6acwyPyqP4BbVDjoT8ZaYc/rpc
Funded address:    0x69AD03393144008463beD1DcB3FD33eb9A7081ba with 600 (10^18)
Funded address:    0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC with 1000000 (10^18) - private key: 56289e99c94b6912bfc12adc093c9b51124f0dc54ac7a766b2bc5ccf558d8027
Network name:      myblockchain
Chain ID:          123
Currency Symbol:   NAT
```

From this output, take note of the Funded Address (with 100 tokens) and set the address as an environment variable:

```bash
export FUNDED_ADDRESS=0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC
```
</Step>
<Step>
## Deploy ERC-20 Contract on C-chain

Now we will deploy an ERC-20 contract. We are using OpenZeppelin's example contract which has been renamed to `ERC20.sol` for convenience.

```bash
forge create --rpc-url local-c --private-key $PK src/8-erc20-to-erc20-interchain-token-transfer/ERC20.sol:TOK
```

Add the contract address in the environment variables.

```bash
export ERC20_C_CHAIN=<"Deployed to" address>
```

Check your balance using the command below:
```bash
cast call --rpc-url local-c --private-key $PK $ERC20_C_CHAIN "balanceOf(address)(uint)" $FUNDED_ADDRESS
```
100,000 tokens should be returned.

</Step>
<Step>
## Deploy Avalanche Interchain Token Transfer Contracts

Next we will deploy two Interchain Token Transfer contracts. One for the source chain (C-Chain) and another on the destination chain (myblockchain).

```bash
avalanche interchain tokenTransferrer deploy
```

```bash
✔ Local Network
✔ C-Chain
✔ Deploy a new Home for the token
✔ An ERC-20 token
Enter the address of the ERC-20 Token: 0x5DB9A7629912EBF95876228C24A848de0bfB43A9
...
Home Deployed to http://127.0.0.1:9650/ext/bc/C/rpc
Home Address: 0x4Ac1d98D9cEF99EC6546dEd4Bd550b0b287aaD6D

Remote Deployed to http://127.0.0.1:9650/ext/bc/2u9Hu7Noja3Z1kbZyrztTMZcDeqb6acwyPyqP4BbVDjoT8ZaYc/rpc
Remote Address: 0x0D189a705c1FFe77F1bF3ee834931b6b9B356c05
```

Save the Remote contract address in the environment variables.

```bash
export ERC20_REMOTE_L1=<"Remote address">
```
</Step>
<Step>
## Get Balances

Before transfering some funds Cross-Chain, check the current balances of both the ERC20 Home token and the Remote one. 

```bash
avalanche key list --local --keys ewoq  --blockchains c,myblockchain --tokens $ERC20_C_CHAIN,$ERC20_REMOTE_L1
```

```bash
+--------+------+---------+--------------------------------------------+---------------+------------------+---------------+
|  KIND  | NAME | SUBNET  |                  ADDRESS                   |     TOKEN     |     BALANCE      |    NETWORK    |
+--------+------+---------+--------------------------------------------+---------------+------------------+---------------+
| stored | ewoq | myblockchain |                                        | TOK (0x0D18.)|               0  | Local Network |
+        +      +----------+--------------------------------------------+---------------+-----------------+---------------+
|        |      | C-Chain  | 0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC | TOK (0x5DB9.)| 100000.000000000 | Local Network |
+--------+------+----------+--------------------------------------------+---------------+-----------------+---------------+
```
</Step>
<Step>
## Transfer the Token Cross-chain

Now that the Avalanche Interchain Token Transfer contracts have been deployed, transfer some ERC20 tokens `TOK` from C-Chain to _myblockchain_

```bash
avalanche key transfer
```

```
✔ Local Network
✔ C-Chain
✔ Blockchain myblockchain
Enter the address of the Token Transferrer on c-chain: 0x4Ac1d98D9cEF99EC6546dEd4Bd550b0b287aaD6D
Enter the address of the Token Transferrer on myblockchain: 0x0D189a705c1FFe77F1bF3ee834931b6b9B356c05
✔ ewoq
✔ Key
✔ ewoq
Amount to send (TOKEN units): 100
```
</Step>
<Step>
## Check Balances

Now we can check the balances of both the ERC-20 Home token and the Remote one. 

```bash
avalanche key list --local --keys ewoq  --blockchains c,myblockchain --tokens $ERC20_C_CHAIN,$ERC20_REMOTE_L1
```

```bash
+--------+------+----------+--------------------------------------------+---------------+-----------------+---------------+
|  KIND  | NAME |  SUBNET  |                  ADDRESS                   |     TOKEN     |     BALANCE     |    NETWORK    |
+--------+------+----------+--------------------------------------------+---------------+-----------------+---------------+
| stored | ewoq | myblockchain | 0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC | TOK (0x0D18.) |   100.000000000 | Local Network |
+        +      +----------+--------------------------------------------+---------------+-----------------+---------------+
|        |      | C-Chain  | 0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC | TOK (0x5DB9.) | 99900.000000000 | Local Network |
+--------+------+----------+--------------------------------------------+---------------+-----------------+---------------+
```

Successfully we have transferred 100 tokens from C-Chain to myblockchain using the Avalanche CLI.
</Step>

</Steps>
